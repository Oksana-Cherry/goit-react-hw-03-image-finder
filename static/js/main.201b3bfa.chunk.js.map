{"version":3,"sources":["components/Searchbar/Searchbar.js","components/ImageGalleryItem/default.jpg","components/ImageGallery/ImageGallery.js","components/Modal/Modal.js","components/Button/Button.js","services/ApiImage.js","App.js","index.js"],"names":["Searchbar","state","query","handleChangeQuery","event","setState","target","value","heandleSubmit","preventDefault","props","onSubmit","className","this","type","onClick","autoComplete","autoFocus","placeholder","onChange","Component","protoType","PropTypes","func","ImageGalleryItem","id","webformatURL","tags","largeImageURL","onImage","src","alt","defaultProps","images","defaultImg","ImageGallery","map","image","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","console","log","onClose","hendleBackdropClick","currentTarget","window","addEventListener","removeEventListener","createPortal","children","Button","onClickBtn","fetchImages","searchQuery","page","axios","get","then","response","data","hits","propTypes","string","isRequired","number","App","imageUrl","showModal","loader","error","onChangeQuery","alert","options","prevState","catch","finally","toggleModal","openModal","url","deleteImg","imageId","filter","prevProps","scrollTo","top","documentElement","scrollHeight","behavior","renderLoadMoreBtn","length","color","height","width","ReactDOM","render","StrictMode","getElementById"],"mappings":"8XAGMA,E,4MACJC,MAAQ,CACNC,MAAO,I,EAGTC,kBAAoB,SAAAC,GAClB,EAAKC,SAAS,CAAEH,MAAOE,EAAME,OAAOC,S,EAGtCC,cAAgB,SAAAJ,GACdA,EAAMK,iBAEmB,KAArB,EAAKR,MAAMC,QACb,EAAKQ,MAAMC,SAAS,EAAKV,MAAMC,OAC/B,EAAKG,SAAS,CAAEH,MAAO,O,4CAI3B,WACE,OACE,wBAAQU,UAAU,YAAlB,SACE,uBAAMA,UAAU,aAAaD,SAAUE,KAAKL,cAA5C,UACE,wBACEM,KAAK,SACLF,UAAU,oBACVG,QAASF,KAAKL,cAHhB,SAKE,sBAAMI,UAAU,0BAAhB,sBAEF,uBACEA,UAAU,mBACVE,KAAK,OACLE,aAAa,MACbC,WAAS,EACTC,YAAY,2BACZX,MAAOM,KAAKZ,MAAMC,MAClBiB,SAAUN,KAAKV,6B,GApCHiB,aA4CxBpB,EAAUqB,UAAY,CACpBb,cAAec,IAAUC,KACzBpB,kBAAmBmB,IAAUC,MAGhBvB,Q,QCpDA,MAA0B,oCCMnCwB,G,YAAmB,SAAC,GAMnB,IALLC,EAKI,EALJA,GACAC,EAII,EAJJA,aACAC,EAGI,EAHJA,KACAC,EAEI,EAFJA,cACAC,EACI,EADJA,QAEA,OACE,oBAAIjB,UAAU,mBAAd,SACE,qBACEA,UAAU,yBACVkB,IAAKJ,EACLK,IAAKJ,EACLZ,QAAS,kBAAMc,EAAQD,OALWH,KAoB1CD,EAAiBQ,aAAe,CAC9BC,OAAQ,GACRP,aAAcQ,EACdN,cAAeM,GAcFC,MA1BM,SAAC,GAAyB,IAAvBF,EAAsB,EAAtBA,OAAQJ,EAAc,EAAdA,QAC9B,OACE,oBAAIjB,UAAU,eAAd,SACGqB,EAAOG,KAAI,SAAAC,GAAK,OACf,cAAC,EAAD,2BAAqCA,GAArC,IAA4CR,QAASA,IAA9BQ,EAAMZ,UCzB/Ba,G,MAAYC,SAASC,cAAc,gBAEpBC,E,4MAkBnBC,cAAgB,SAAAC,GACC,WAAXA,EAAEC,OACJC,QAAQC,IAAI,kKACZ,EAAKpC,MAAMqC,Y,EAIfC,oBAAsB,SAAA5C,GAIhBA,EAAM6C,gBAAkB7C,EAAME,QAChC,EAAKI,MAAMqC,W,uDA7Bf,WASEG,OAAOC,iBAAiB,UAAWtC,KAAK6B,iB,kCAG1C,WAEEQ,OAAOE,oBAAoB,UAAWvC,KAAK6B,iB,oBAmB7C,WACE,OAAOW,uBACL,qBAAKzC,UAAU,UAAUG,QAASF,KAAKmC,oBAAvC,SACE,qBAAKpC,UAAU,QAAf,SAAwBC,KAAKH,MAAM4C,aAErChB,O,GAvC6BlB,aCH7BmC,G,MAAS,SAAC,GAAiB,IAAfxC,EAAc,EAAdA,QAChB,OACE,wBAAQH,UAAU,SAASE,KAAK,SAASC,QAASA,EAAlD,4BAMJwC,EAAOlC,UAAY,CACjBmC,WAAYlC,IAAUC,MAGTgC,Q,0CCMTE,EAAc,SAAC,GAAoC,IAAD,IAAjCC,mBAAiC,MAAnB,GAAmB,MAAfC,YAAe,MAAR,EAAQ,EACtD,OAAOC,IACJC,IADI,UAnBG,2BAmBH,cAESH,EAFT,iBAE6BC,EAF7B,gBAlBG,qCAkBH,yDAIJG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,KAAKC,SAGpCR,EAAYS,UAAY,CACtBR,YAAapC,IAAU6C,OAAOC,WAC9BT,KAAMrC,IAAU+C,OAAOD,Y,UC6GVE,E,4MA7HbrE,MAAQ,CACNgC,OAAQ,GACRyB,YAAa,GACbC,KAAM,EACNY,SAAU,GACVC,WAAW,EACXC,QAAQ,EACRC,MAAO,M,EAwBTC,cAAgB,SAAAzE,GAIVA,IAAU,EAAKD,MAAMyD,YACvB,EAAKrD,SAAS,CAAEqD,YAAaxD,EAAOyD,KAAM,EAAG1B,OAAQ,GAAIyC,MAAO,OAEhEE,MAAM,4C,EAIVnB,YAAc,WAAO,IAAD,EACY,EAAKxD,MAA3B0D,EADU,EACVA,KAKFkB,EAAU,CAAEnB,YANA,EACJA,YAKiBC,QAC/B,EAAKtD,SAAS,CAAEoE,QAAQ,IAExBhB,EAAYoB,GACTf,MAAK,SAAA7B,GAGJ,EAAK5B,UAAS,SAAAyE,GAAS,MAAK,CAC1B7C,OAAO,GAAD,mBAAM6C,EAAU7C,QAAhB,YAA2BA,IACjC0B,KAAMmB,EAAUnB,KAAO,SAI1BoB,OAAM,SAAAL,GAAK,OAAI,EAAKrE,SAAS,CAAEqE,aAC/BM,SAAQ,kBAAM,EAAK3E,SAAS,CAAEoE,QAAQ,Q,EAG3CQ,YAAc,WACZ,EAAK5E,UAAS,kBAAoB,CAAEmE,WAAtB,EAAGA,e,EAGnBU,UAAY,SAAAC,GACV,EAAK9E,SAAS,CACZkE,SAAUY,IAEZ,EAAKF,e,EAGPG,UAAY,SAAAC,GACVxC,QAAQC,IAAI,KAAMuC,GAClBxC,QAAQC,IAAI,EAAK7C,MAAMgC,QACvB,EAAK5B,UAAS,kBAAiB,CAC7B4B,OADY,EAAGA,OACAqD,QAAO,qBAAG7D,KAAgB4D,U,wDAtE7C,SAAmBE,EAAWT,GACxBA,EAAUpB,cAAgB7C,KAAKZ,MAAMyD,aACvC7C,KAAK4C,cAEPP,OAAOsC,SAAS,CACdC,IAAKlD,SAASmD,gBAAgBC,aAC9BC,SAAU,a,oBAoEd,WAAU,IAAD,EACsD/E,KAAKZ,MAA1DgC,EADD,EACCA,OAAQsC,EADT,EACSA,SAAU5C,EADnB,EACmBA,KAAM6C,EADzB,EACyBA,UAAWC,EADpC,EACoCA,OAAQC,EAD5C,EAC4CA,MAC7CmB,EAAoB5D,EAAO6D,OAAS,IAAMrB,EAEhD,OACE,sBAAK7D,UAAU,MAAf,UACE,cAAC,EAAD,CAAWD,SAAUE,KAAK8D,gBAC1B,cAAC,EAAD,CACE1C,OAAQA,EACRJ,QAAShB,KAAKqE,UACdnE,QAASF,KAAKuE,YAEfS,GACC,cAAC,EAAD,CAAQ9E,QAASF,KAAK4C,YAAa7C,UAAU,WAE9C6D,GACC,cAAC,IAAD,CACE3D,KAAK,YACLiF,MAAM,UACNC,OAAQ,GACRC,MAAO,GACPrF,UAAU,WAGb8D,GAAS,kDACTF,GACC,cAAC,EAAD,CAAOzB,QAASlC,KAAKoE,YAArB,SACE,qBAAKrE,UAAU,QAAf,SACE,qBACEkB,IAAKyC,EACLxC,IAAKJ,EACLf,UAAU,YACVG,QAASF,KAAKqE,uB,GArHZ9D,aCRlB8E,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEF7D,SAAS8D,eAAe,W","file":"static/js/main.201b3bfa.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './Searchbar.scss';\r\nclass Searchbar extends Component {\r\n  state = {\r\n    query: '',\r\n  };\r\n\r\n  handleChangeQuery = event => {\r\n    this.setState({ query: event.target.value });\r\n  };\r\n\r\n  heandleSubmit = event => {\r\n    event.preventDefault();\r\n    //  console.log(this.state);\r\n    if (this.state.query !== '') {\r\n      this.props.onSubmit(this.state.query);\r\n      this.setState({ query: '' });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form className=\"SearchForm\" onSubmit={this.heandleSubmit}>\r\n          <button\r\n            type=\"submit\"\r\n            className=\"SearchForm-button\"\r\n            onClick={this.heandleSubmit}\r\n          >\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n          <input\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            value={this.state.query}\r\n            onChange={this.handleChangeQuery}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nSearchbar.protoType = {\r\n  heandleSubmit: PropTypes.func,\r\n  handleChangeQuery: PropTypes.func,\r\n};\r\n\r\nexport default Searchbar;\r\n","export default __webpack_public_path__ + \"static/media/default.2e01288c.jpg\";","import React from 'react';\r\nimport defaultImg from '../ImageGalleryItem/default.jpg';\r\nimport PropTypes from 'prop-types';\r\nimport './ImageGallery.scss';\r\nimport '../ImageGalleryItem/ImageGalleryItem.scss';\r\n\r\nconst ImageGalleryItem = ({\r\n  id,\r\n  webformatURL,\r\n  tags,\r\n  largeImageURL,\r\n  onImage,\r\n}) => {\r\n  return (\r\n    <li className=\"ImageGalleryItem\" key={id}>\r\n      <img\r\n        className=\"ImageGalleryItem_image\"\r\n        src={webformatURL}\r\n        alt={tags}\r\n        onClick={() => onImage(largeImageURL)}\r\n      />\r\n    </li>\r\n  );\r\n};\r\n\r\nconst ImageGallery = ({ images, onImage }) => {\r\n  return (\r\n    <ul className=\"ImageGallery\">\r\n      {images.map(image => (\r\n        <ImageGalleryItem key={image.id} {...image} onImage={onImage} />\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\nImageGalleryItem.defaultProps = {\r\n  images: [],\r\n  webformatURL: defaultImg,\r\n  largeImageURL: defaultImg,\r\n};\r\nImageGalleryItem.propTypes = {\r\n  id: PropTypes.number.isRequired,\r\n  images: PropTypes.arrayOf(\r\n    PropTypes.exact({\r\n      webformatURL: PropTypes.string,\r\n      tags: PropTypes.string,\r\n      largeImageURL: PropTypes.string,\r\n    }),\r\n  ),\r\n\r\n  onImage: PropTypes.func,\r\n};\r\nexport default ImageGallery;\r\n","import React, { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport './Modal.scss';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nexport default class Modal extends Component {\r\n  componentDidMount() {\r\n    //*  console.log('Modal componentDidMount');\r\n    /*window.addEventListener('keydown', e => {\r\n      //console.log(e.code);\r\n      if (e.code === 'Escape') {\r\n        console.log('Нажали ESC, нужно закрыть модалку');\r\n        this.props.onClose();\r\n      }\r\n    });*/\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    //*  console.log('Modal componentWillUnmount');\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      console.log('Нажали ESC, нужно закрыть модалку');\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  hendleBackdropClick = event => {\r\n    // console.log('Кликнули в бекдроп');\r\n    //console.log('на чем сработал: ', event.currentTarget);\r\n    //console.log('куда буквально кликнули: ', event.target);\r\n    if (event.currentTarget === event.target) {\r\n      this.props.onClose(); //по серому\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className=\"Overlay\" onClick={this.hendleBackdropClick}>\r\n        <div className=\"Modal\">{this.props.children}</div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n","import PropTypes from 'prop-types';\r\nimport './Button.scss';\r\n\r\nconst Button = ({ onClick }) => {\r\n  return (\r\n    <button className=\"Button\" type=\"button\" onClick={onClick}>\r\n      Load more...\r\n    </button>\r\n  );\r\n};\r\n\r\nButton.protoType = {\r\n  onClickBtn: PropTypes.func,\r\n};\r\n\r\nexport default Button;\r\n","import axios from 'axios';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst URL = 'https://pixabay.com/api/';\r\nconst KEY = '19764594-1ff33c8737753e7bf91ee1679';\r\n/*'https://pixabay.com/api/?key=19764594-1ff33c8737753e7bf91ee1679&image_type=photo&orientation=horizontal&per_page=12',*/\r\n\r\n/*axios.defaults.baseURL = URL;\r\naxios.defaults.params = {\r\n  key: KEY,\r\n  image_type: 'photo',\r\n  orientation: 'horizontal',\r\n  per_page: 12,\r\n};\r\nconst fetchImages = ({ searchQuery, page }) => {\r\n  return axios\r\n    .get('', {\r\n      params: { searchQuery, page },\r\n    })\r\n    .then(response => response.data.hits);\r\n};*/\r\nconst fetchImages = ({ searchQuery = '', page = 1 }) => {\r\n  return axios\r\n    .get(\r\n      `${URL}?q=${searchQuery}&page=${page}&key=${KEY}&image_type=photo&orientation=horizontal&per_page=12`,\r\n    )\r\n    .then(response => response.data.hits);\r\n};\r\n\r\nfetchImages.propTypes = {\r\n  searchQuery: PropTypes.string.isRequired,\r\n  page: PropTypes.number.isRequired,\r\n};\r\nexport { fetchImages };\r\n","import React, { Component } from 'react';\r\n//import axios from 'axios';\r\nimport Searchbar from './components/Searchbar';\r\nimport ImageGallery from './components/ImageGallery';\r\nimport Modal from './components/Modal';\r\nimport Button from './components/Button';\r\n\r\nimport Loader from 'react-loader-spinner';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\n\r\nimport { fetchImages } from './services/ApiImage';\r\n//const URL = 'https://pixabay.com/api/';\r\n//const KEY = '19764594-1ff33c8737753e7bf91ee1679';\r\nimport './App.scss';\r\nclass App extends Component {\r\n  state = {\r\n    images: [],\r\n    searchQuery: '',\r\n    page: 1,\r\n    imageUrl: '',\r\n    showModal: false,\r\n    loader: false,\r\n    error: null,\r\n  };\r\n  //вызов запроса при обновлении\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevState.searchQuery !== this.state.searchQuery) {\r\n      this.fetchImages();\r\n    }\r\n    window.scrollTo({\r\n      top: document.documentElement.scrollHeight,\r\n      behavior: 'smooth',\r\n    });\r\n  }\r\n\r\n  /*componentDidMount() *1-шаг*\r\n    axios\r\n      .get(\r\n        `${URL}?&key=${KEY}&q=${query}&image_type=photo&orientation=horizontal&per_page=12`,\r\n      )\r\n      .then(response => {\r\n        // console.log({ images: response.data });\r\n        this.setState({ images: response.data.hits });\r\n      });\r\n  }*/\r\n\r\n  onChangeQuery = query => {\r\n    //this.setState({ searchQuery: query });\r\n    //this.fetchImages();\r\n    //handleQuery= query=>\r\n    if (query !== this.state.searchQuery) {\r\n      this.setState({ searchQuery: query, page: 1, images: [], error: null });\r\n    } else {\r\n      alert('this request has already been completed');\r\n    }\r\n  };\r\n  //2-шаг*\r\n  fetchImages = () => {\r\n    const { page, searchQuery } = this.state;\r\n    /*axios\r\n      .get(\r\n        `${URL}?&key=${KEY}&q=${searchQuery}&image_type=photo&orientation=horizontal&page=${page}&per_page=12`,\r\n      )*/\r\n    const options = { searchQuery, page };\r\n    this.setState({ loader: true });\r\n\r\n    fetchImages(options)\r\n      .then(images => {\r\n        // console.log({ images: response.data });\r\n        //*this.setState({ images: response.data.hits });\r\n        this.setState(prevState => ({\r\n          images: [...prevState.images, ...images], //response.data.hits,\r\n          page: prevState.page + 1,\r\n        }));\r\n      })\r\n\r\n      .catch(error => this.setState({ error }))\r\n      .finally(() => this.setState({ loader: false }));\r\n  };\r\n\r\n  toggleModal = () => {\r\n    this.setState(({ showModal }) => ({ showModal: !showModal }));\r\n  };\r\n\r\n  openModal = url => {\r\n    this.setState({\r\n      imageUrl: url,\r\n    });\r\n    this.toggleModal();\r\n  };\r\n\r\n  deleteImg = imageId => {\r\n    console.log('id', imageId);\r\n    console.log(this.state.images);\r\n    this.setState(({ images }) => ({\r\n      images: images.filter(({ id }) => id !== imageId),\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    const { images, imageUrl, tags, showModal, loader, error } = this.state;\r\n    const renderLoadMoreBtn = images.length > 0 && !loader;\r\n\r\n    return (\r\n      <div className=\"App\">\r\n        <Searchbar onSubmit={this.onChangeQuery} />\r\n        <ImageGallery\r\n          images={images}\r\n          onImage={this.openModal}\r\n          onClick={this.deleteImg}\r\n        />\r\n        {renderLoadMoreBtn && (\r\n          <Button onClick={this.fetchImages} className=\"Button\" />\r\n        )}\r\n        {loader && (\r\n          <Loader\r\n            type=\"ThreeDots\"\r\n            color=\"#00BFFF\"\r\n            height={80}\r\n            width={80}\r\n            className=\"Loader\"\r\n          />\r\n        )}\r\n        {error && <h1>No result found!</h1>}\r\n        {showModal && (\r\n          <Modal onClose={this.toggleModal}>\r\n            <div className=\"modal\">\r\n              <img\r\n                src={imageUrl}\r\n                alt={tags}\r\n                className=\"modal_img\"\r\n                onClick={this.openModal}\r\n              />\r\n            </div>\r\n          </Modal>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'modern-normalize/modern-normalize.css';\r\nimport './styles/base.scss';\r\n\r\nimport App from './App';\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n"],"sourceRoot":""}